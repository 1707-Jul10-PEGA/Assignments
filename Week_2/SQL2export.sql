--------------------------------------------------------
--  File created - Sunday-July-23-2017   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for View ALL_EXCEPT_SSN_SALARY
--------------------------------------------------------

  CREATE OR REPLACE FORCE VIEW "HAIHOUA"."ALL_EXCEPT_SSN_SALARY" ("EMPLOYEEID", "USERNAME", "PASSWORD", "NAME", "DEPARTMENT", "MANAGER") AS 
  SELECT employeeid, username, password, name, department, manager FROM Employees
;
--------------------------------------------------------
--  DDL for View PRODUCT_NAME_DESCRIPTION
--------------------------------------------------------

  CREATE OR REPLACE FORCE VIEW "HAIHOUA"."PRODUCT_NAME_DESCRIPTION" ("NAME", "DESCRIPT") AS 
  SELECT Name, Descript FROM Product
;
--------------------------------------------------------
--  DDL for Table CATEGORY
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."CATEGORY" 
   (	"CATID" NUMBER, 
	"NAME" VARCHAR2(80 BYTE), 
	"DESCRIPT" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table EMPLOYEES
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."EMPLOYEES" 
   (	"EMPLOYEEID" NUMBER, 
	"USERNAME" VARCHAR2(20 BYTE), 
	"PASSWORD" VARCHAR2(20 BYTE), 
	"NAME" VARCHAR2(25 BYTE), 
	"DEPARTMENT" CHAR(2 BYTE), 
	"MANAGER" NUMBER, 
	"SSN" NUMBER, 
	"SALARY" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table FLASH_CARDS
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."FLASH_CARDS" 
   (	"FC_ID" NUMBER, 
	"FC_QUESTION" VARCHAR2(4000 BYTE), 
	"FC_ANSWER" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ORDERITEM
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."ORDERITEM" 
   (	"ORDERID" NUMBER, 
	"PRODUCTID" NUMBER, 
	"QUANTITY" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ORDERS
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."ORDERS" 
   (	"ORDERID" NUMBER, 
	"EMPLOYEEID" NUMBER, 
	"ORDERDATE" DATE, 
	"STATUS" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PRODUCT
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."PRODUCT" 
   (	"PRODUCTID" NUMBER, 
	"CATID" NUMBER, 
	"NAME" VARCHAR2(80 BYTE), 
	"DESCRIPT" VARCHAR2(255 BYTE), 
	"UNITCOST" NUMBER, 
	"SUPPID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SUPPLIER
--------------------------------------------------------

  CREATE TABLE "HAIHOUA"."SUPPLIER" 
   (	"SUPPID" NUMBER, 
	"NAME" VARCHAR2(80 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into HAIHOUA.CATEGORY
SET DEFINE OFF;
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (2,'FOOD2','DESCR');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (3,'Cleaning Supplies','SCRUBS SOAP');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (4,'Computer Supplies','PAPER INK');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (5,'Desk Accessories',' ');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (6,'Writing Supplies',' ');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (7,'Printer Supplies',' ');
Insert into HAIHOUA.CATEGORY (CATID,NAME,DESCRIPT) values (8,'ELECTRONIC','PS4');
REM INSERTING into HAIHOUA.EMPLOYEES
SET DEFINE OFF;
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (1,'dclark','drc','Dave','HR',1,null,null);
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (2,'jsmith','js','John','IT',2,null,null);
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (3,'mjones','mj','Mike','HR',2,null,null);
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (4,'klink','kl','Kara','IT',1,null,null);
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (5,'SAMSM','PASSWORD','SAM SMITH','IT',1,null,null);
Insert into HAIHOUA.EMPLOYEES (EMPLOYEEID,USERNAME,PASSWORD,NAME,DEPARTMENT,MANAGER,SSN,SALARY) values (7,'USERNAME','PASS','NAME','IT',1,null,null);
REM INSERTING into HAIHOUA.FLASH_CARDS
SET DEFINE OFF;
REM INSERTING into HAIHOUA.ORDERITEM
SET DEFINE OFF;
REM INSERTING into HAIHOUA.ORDERS
SET DEFINE OFF;
REM INSERTING into HAIHOUA.PRODUCT
SET DEFINE OFF;
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (1,2,'Ruler','12 inch stainless steel',0.99,2);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (5,2,'Colored pencils','Non toxic 12 pack',2.84,1);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (6,3,'All purpose cleaner','Use on all washable surfaces',4.29,2);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (7,3,'Paper hand towels','320 sheets per roll',5.25,1);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (8,4,'CD-R','700 mb with jewel case',1.09,1);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (9,4,'3.5 inch disks','High density formatted box of 10',5.99,1);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (10,4,'Monitor wipes','Non abrasive lint free',6.99,2);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (11,4,'Dust blaster','Ozone safe no CFSs',8.99,2);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (12,2,'Clear tape','1 inch wide 6 rolls',3.9,1);
Insert into HAIHOUA.PRODUCT (PRODUCTID,CATID,NAME,DESCRIPT,UNITCOST,SUPPID) values (14,2,'Glue stick','Odorless non toxic',1.99,2);
REM INSERTING into HAIHOUA.SUPPLIER
SET DEFINE OFF;
Insert into HAIHOUA.SUPPLIER (SUPPID,NAME) values (1,'XYZ Office supplies');
Insert into HAIHOUA.SUPPLIER (SUPPID,NAME) values (2,'ABC Office products');
--------------------------------------------------------
--  DDL for Index PK_PRODUCT
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_PRODUCT" ON "HAIHOUA"."PRODUCT" ("PRODUCTID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_ORDER
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_ORDER" ON "HAIHOUA"."ORDERS" ("ORDERID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_SUPP
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_SUPP" ON "HAIHOUA"."SUPPLIER" ("SUPPID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_ORDERITEM
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_ORDERITEM" ON "HAIHOUA"."ORDERITEM" ("ORDERID", "PRODUCTID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_EMPLOYEES
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_EMPLOYEES" ON "HAIHOUA"."EMPLOYEES" ("EMPLOYEEID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_FCID
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_FCID" ON "HAIHOUA"."FLASH_CARDS" ("FC_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_CATEGORY
--------------------------------------------------------

  CREATE UNIQUE INDEX "HAIHOUA"."PK_CATEGORY" ON "HAIHOUA"."CATEGORY" ("CATID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger NEW_FC_TRIG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "HAIHOUA"."NEW_FC_TRIG" 
  BEFORE INSERT ON FLASH_CARDS
  FOR EACH ROW
  BEGIN
    SELECT FC_SEQ.NEXTVAL INTO :new.FLASH_CARDS.FC_ID FROM DUAL;
  END;

/
ALTER TRIGGER "HAIHOUA"."NEW_FC_TRIG" ENABLE;
--------------------------------------------------------
--  DDL for Procedure ALL_EMPLOYEE_NAME
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."ALL_EMPLOYEE_NAME" ( PRODUCT_ID IN NUMBER)
    AS
    BEGIN
        OPEN SELECT_ROW FOR SELECT P.NAME, P.DESCRIPT FROM PRODUCT P;
    END;

/
--------------------------------------------------------
--  DDL for Procedure ALL_PRODUCT
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."ALL_PRODUCT" ( SELECT_ROW OUT SYS_REFCURSOR)
    AS
    BEGIN
        OPEN SELECT_ROW FOR SELECT P.NAME, P.UNITCOST FROM PRODUCT P;
    END;

/
--------------------------------------------------------
--  DDL for Procedure EMPLOYEE_USERNAME_PASSWORD
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."EMPLOYEE_USERNAME_PASSWORD" ( SELECT_ROW OUT SYS_REFCURSOR, E_ID IN NUMBER)
    AS
    BEGIN
        OPEN SELECT_ROW FOR SELECT E.USERNAME, E.PASSWORD FROM EMPLOYEES E WHERE E.EMPLOYEEID = E_ID;
    END;

/
--------------------------------------------------------
--  DDL for Procedure INSERT_EMPLOYEE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."INSERT_EMPLOYEE" ( 
    E_ID NUMBER, 
    E_USERNAME VARCHAR, 
    E_PASSWORD VARCHAR, 
    E_NAME VARCHAR, 
    E_DEPARTMENT VARCHAR,
    E_MANAGER NUMBER)
    AS
    BEGIN
        COMMIT;
        Set Transaction Name 'INSERT EMPLOYEE';
        INSERT INTO EMPLOYEES VALUES (E_ID, E_USERNAME, E_PASSWORD, E_NAME, E_DEPARTMENT,E_MANAGER);
    END;

/
--------------------------------------------------------
--  DDL for Procedure INSERT_MANAGER
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."INSERT_MANAGER" (
    E_ID NUMBER, 
    E_USERNAME VARCHAR2, 
    E_PASSWORD VARCHAR2, 
    E_NAME VARCHAR2, 
    E_DEPARTMENT VARCHAR2)
    AS
    BEGIN
        INSERT INTO EMPLOYEES VALUES (E_ID, E_USERNAME, E_PASSWORD, E_NAME, E_DEPARTMENT,2);
    END;

/
--------------------------------------------------------
--  DDL for Procedure INSERT_NEW_MANAGER
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."INSERT_NEW_MANAGER" (
    E_ID NUMBER, 
    E_USERNAME VARCHAR2, 
    E_PASSWORD VARCHAR2, 
    E_NAME VARCHAR2, 
    E_DEPARTMENT VARCHAR2)
    AS
    BEGIN
        INSERT INTO EMPLOYEES VALUES (E_ID, E_USERNAME, E_PASSWORD, E_NAME, E_DEPARTMENT,2);
    END;

/
--------------------------------------------------------
--  DDL for Procedure PRODUCT_DESCRIPT
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."PRODUCT_DESCRIPT" ( SELECT_ROW OUT SYS_REFCURSOR, PRODUCT_ID IN NUMBER)
    AS
    BEGIN
        OPEN SELECT_ROW FOR SELECT P.NAME, P.DESCRIPT FROM PRODUCT P WHERE P.PRODUCTID = PRODUCT_ID;
    END;

/
--------------------------------------------------------
--  DDL for Procedure TOTAL_COST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."TOTAL_COST" (TOTAL OUT NUMBER)
    AS
    BEGIN
        SELECT SUM(UNITCOST) INTO TOTAL FROM PRODUCT;
    END;

/
--------------------------------------------------------
--  DDL for Procedure UPDATE_2_CATEGORY
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."UPDATE_2_CATEGORY" (C_ID1 IN NUMBER, C_NAME1 IN VARCHAR, C_D1 IN VARCHAR, C_ID2 IN NUMBER, C_NAME2 IN VARCHAR, C_D2 IN VARCHAR) AS
BEGIN
    commit;
    SET TRANSACTION NAME 'UPDATE 2 CATEGORY';
    UPDATE Category SET Name=C_NAME1, Descript=C_D1 WHERE CatID=C_ID1;
    UPDATE Category SET Name=C_NAME2, Descript=C_D2 WHERE CatID=C_ID2;
    commit;
END;

/
--------------------------------------------------------
--  DDL for Procedure UPDATE_UNITCOST
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HAIHOUA"."UPDATE_UNITCOST" ( P_ID NUMBER, P_COST NUMBER)
    AS
    BEGIN
        COMMIT;
        Set Transaction Name 'UPDATE UNIT COST';
        UPDATE PRODUCT SET UNITCOST = P_COST WHERE PRODUCTID = P_ID;
    END;

/
--------------------------------------------------------
--  DDL for Function COUNT_PRODUCT
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."COUNT_PRODUCT" 
    RETURN NUMBER
    AS  
    COUNT_ROW NUMBER;
    BEGIN
        SELECT COUNT(*) INTO COUNT_ROW FROM PRODUCT;
        RETURN COUNT_ROW;
    END;

/
--------------------------------------------------------
--  DDL for Function DESCR_LENGTH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."DESCR_LENGTH" 
    RETURN NUMBER
    AS  
    LEN NUMBER;
    BEGIN
        SELECT LENGTH(P.DESCRIPT) INTO LEN FROM PRODUCT P WHERE NAME = 'LASER POINTER';
        RETURN LEN;
    END;

/
--------------------------------------------------------
--  DDL for Function PRODUCT_COST
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."PRODUCT_COST" (E_USERNAME VARCHAR)
    RETURN BOOLEAN
    AS  
    ROW_COUNT NUMBER;
    BEGIN
        SELECT COUNT(*) INTO ROW_COUNT FROM EMPLOYEES E WHERE E.USERNAME = E_USERNAME AND E.MANAGER = 2;
        IF ROW_COUNT > 0 THEN RETURN TRUE;
        END IF;
        RETURN FALSE;
    END;

/
--------------------------------------------------------
--  DDL for Function SUM_COST
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."SUM_COST" 
    RETURN NUMBER
    AS  
    SUM_COST NUMBER;
    BEGIN
        SELECT SUM(UNITCOST) INTO SUM_COST FROM PRODUCT;
        RETURN SUM_COST;
    END;

/
--------------------------------------------------------
--  DDL for Function UPPCASE_USERNAME
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."UPPCASE_USERNAME" (E_NAME in VARCHAR)
    RETURN VARCHAR
    AS  
    STR VARCHAR(255);
    BEGIN
        SELECT UPPER(NAME) INTO STR FROM EMPLOYEES E WHERE E.NAME = E_NAME;
        RETURN STR;
    END;

/
--------------------------------------------------------
--  DDL for Function UPPERCASE_USERNAME
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."UPPERCASE_USERNAME" (E_NAME in VARCHAR)
    RETURN VARCHAR
    AS  
    STR VARCHAR(255);
    BEGIN
        SELECT UPPER(USERNAME) INTO STR FROM EMPLOYEES E WHERE E.NAME = E_NAME;
        RETURN STR;
    END;

/
--------------------------------------------------------
--  DDL for Function USERNAME_MANAGER
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "HAIHOUA"."USERNAME_MANAGER" (E_USERNAME in VARCHAR2)
    RETURN  VARCHAR2
    AS  
    ROW_COUNT NUMBER;
    BEGIN
        SELECT COUNT(*) INTO ROW_COUNT FROM EMPLOYEES E WHERE E.USERNAME = E_USERNAME AND E.MANAGER = 2;
        IF ROW_COUNT > 0 THEN RETURN 'TRUE';
        END IF;
        RETURN 'FALSE';
    END;

/
--------------------------------------------------------
--  Constraints for Table CATEGORY
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."CATEGORY" ADD CONSTRAINT "PK_CATEGORY" PRIMARY KEY ("CATID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."CATEGORY" MODIFY ("CATID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SUPPLIER
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."SUPPLIER" ADD CONSTRAINT "PK_SUPP" PRIMARY KEY ("SUPPID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."SUPPLIER" MODIFY ("SUPPID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ORDERITEM
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."ORDERITEM" ADD CONSTRAINT "PK_ORDERITEM" PRIMARY KEY ("ORDERID", "PRODUCTID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."ORDERITEM" MODIFY ("QUANTITY" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."ORDERITEM" MODIFY ("PRODUCTID" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."ORDERITEM" MODIFY ("ORDERID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table EMPLOYEES
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."EMPLOYEES" ADD CONSTRAINT "PK_EMPLOYEES" PRIMARY KEY ("EMPLOYEEID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("MANAGER" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("DEPARTMENT" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."EMPLOYEES" MODIFY ("EMPLOYEEID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ORDERS
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."ORDERS" ADD CONSTRAINT "PK_ORDER" PRIMARY KEY ("ORDERID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."ORDERS" MODIFY ("STATUS" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."ORDERS" MODIFY ("ORDERDATE" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."ORDERS" MODIFY ("EMPLOYEEID" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."ORDERS" MODIFY ("ORDERID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PRODUCT
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."PRODUCT" ADD CONSTRAINT "PK_PRODUCT" PRIMARY KEY ("PRODUCTID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."PRODUCT" MODIFY ("SUPPID" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."PRODUCT" MODIFY ("CATID" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."PRODUCT" MODIFY ("PRODUCTID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table FLASH_CARDS
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."FLASH_CARDS" ADD CONSTRAINT "PK_FCID" PRIMARY KEY ("FC_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HAIHOUA"."FLASH_CARDS" MODIFY ("FC_ANSWER" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."FLASH_CARDS" MODIFY ("FC_QUESTION" NOT NULL ENABLE);
  ALTER TABLE "HAIHOUA"."FLASH_CARDS" MODIFY ("FC_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table ORDERITEM
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."ORDERITEM" ADD CONSTRAINT "FK_ORDER_PRODUCT" FOREIGN KEY ("PRODUCTID")
	  REFERENCES "HAIHOUA"."PRODUCT" ("PRODUCTID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ORDERS
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."ORDERS" ADD CONSTRAINT "FK_EMPLOYEE_ORDER" FOREIGN KEY ("EMPLOYEEID")
	  REFERENCES "HAIHOUA"."EMPLOYEES" ("EMPLOYEEID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PRODUCT
--------------------------------------------------------

  ALTER TABLE "HAIHOUA"."PRODUCT" ADD CONSTRAINT "FK_PRODUCT_CATEGORY" FOREIGN KEY ("CATID")
	  REFERENCES "HAIHOUA"."CATEGORY" ("CATID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "HAIHOUA"."PRODUCT" ADD CONSTRAINT "FK_PRODUCT_SUPPLIER" FOREIGN KEY ("SUPPID")
	  REFERENCES "HAIHOUA"."SUPPLIER" ("SUPPID") ON DELETE CASCADE ENABLE;
